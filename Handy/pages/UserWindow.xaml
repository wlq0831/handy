<Window x:Class="Handy.pages.UserWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Handy.ViewModels"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        mc:Ignorable="d"
        Title="用户管理" Height="450" Width="800">
    <!--<Window.Resources>
        <local:UserViewModel x:Key="UserVM"></local:UserViewModel>
    </Window.Resources>-->
    <!--<DockPanel DataContext="{StaticResource UserVM}">-->
    <DockPanel Name="userWindow">
        <!--工具栏-->
        <DockPanel DockPanel.Dock="Top">
            <WrapPanel DockPanel.Dock="Left">
                <WrapPanel  Margin="5 5">
                    <TextBlock  Margin="5" Text="用户名称"  Foreground="Black" VerticalAlignment="Center"/>
                    <hc:TextBox x:Name="contract_name" hc:InfoElement.ShowClearButton="True" Width="200" Text="{Binding Search}"></hc:TextBox>
                </WrapPanel>

                <Button x:Name="SearchBtn" Width="60"  Margin="5 5" Padding="0" Style="{StaticResource ButtonPrimary}" Command="{Binding QueryCommand}">
                    <DockPanel>
                        <TextBlock Text="&#xe6ac;" Style="{StaticResource iconfont}" HorizontalAlignment="Left" Foreground="White" FontSize="14" VerticalAlignment="Center" Margin="0,0,0,0" />
                        <TextBlock DockPanel.Dock="Right" Text="查询"  HorizontalAlignment="Right" VerticalAlignment="Center" Margin="4,0,0,0" Foreground="White" />
                    </DockPanel>
                </Button>

                <Button x:Name="resetBtn" Width="60"  Margin="5 5" Padding="0" Style="{StaticResource ButtonPrimary}" Command="{Binding ResetCommand}">
                    <DockPanel>
                        <TextBlock Text="&#58933;" Style="{StaticResource iconfont}" HorizontalAlignment="Left" Foreground="White" FontSize="14" VerticalAlignment="Center" Margin="0,0,0,0" />
                        <TextBlock DockPanel.Dock="Right" Text="重置"  HorizontalAlignment="Right" VerticalAlignment="Center" Margin="4,0,0,0" Foreground="White" />
                    </DockPanel>
                </Button>
            </WrapPanel>

            <Grid DockPanel.Dock="Right">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    
                </Grid.ColumnDefinitions>
                <Button x:Name="AddBtn" Grid.Column="1" Command="{Binding AddCommand}" Margin="5 5"  Padding="0" Width="70" Style="{StaticResource ButtonPrimary}">
                    <DockPanel>
                        <TextBlock Text="&#xe607;" Style="{StaticResource iconfont}" Foreground="White" FontSize="18" />
                        <TextBlock DockPanel.Dock="Right" Text="添加"  HorizontalAlignment="Right" VerticalAlignment="Center" Margin="10,0,5,0" FontSize="14" />
                    </DockPanel>
                </Button>

                <Button x:Name="EditBtn" Grid.Column="2" Command="{Binding EditCommand}" Margin="5 5"  Padding="0" Width="70" Style="{StaticResource ButtonPrimary}">
                    <DockPanel   >
                        <TextBlock Text="&#xe62a;" Style="{StaticResource iconfont}" HorizontalAlignment="Left" Foreground="White" FontSize="18" VerticalAlignment="Center" Margin="2,0,0,0" />
                        <TextBlock DockPanel.Dock="Right" Text="修改"  HorizontalAlignment="Right" VerticalAlignment="Center" Margin="10,0,5,0" FontSize="14" />
                    </DockPanel>
                </Button>

                <Button x:Name="DeleteBtn" Grid.Column="3" Command="{Binding DeleteCommand}" Margin="5 5" Padding="0" Width="70" Style="{StaticResource ButtonDanger}">
                    <DockPanel>
                        <TextBlock Text="&#xe629;" Style="{StaticResource iconfont}" HorizontalAlignment="Left" Foreground="White" FontSize="16" VerticalAlignment="Center" Margin="2,0,0,0" />
                        <TextBlock DockPanel.Dock="Right" Text="删除" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="10,0,5,0" FontSize="14" />
                    </DockPanel>
                </Button>

            </Grid>
        </DockPanel>


        <!--分页栏-->
        <StackPanel DockPanel.Dock="Bottom" Margin="10" Orientation="Horizontal" Height="40" HorizontalAlignment="Center">
            <hc:Pagination x:Name="page1" PageIndex="{Binding PageNo}" AutoHiding="False" MaxPageCount="{Binding TotalPage}"
                            PageUpdated="page1_PageUpdated" IsJumpEnabled="True" />
            <WrapPanel>
                <!--<TextBlock Margin="8,6,8,0">
                    <TextBlock.Text>
                        <Binding Path="totalRecords" StringFormat="总数：{0}" />
                    </TextBlock.Text>
                </TextBlock>-->
                <TextBlock Text="{Binding TotalRows}" Margin="8,6,8,0"></TextBlock>
                <ComboBox x:Name="PageSizeComboBox" Text="{Binding PageSize}" Height="30" Style="{StaticResource ComboBoxExtend}" Width="70" Margin="5,0,0,0" />
            </WrapPanel>
        </StackPanel>


        <!--数据栏-->
        <DataGrid x:Name="dataGrid" AutoGenerateColumns="False" ItemsSource="{Binding UserList}" SelectionChanged="DataGrid_SelectionChanged">
            <DataGrid.Columns>
                <!--<DataGridTextColumn Header="序号" Binding="{Binding Row}" Width="*" MinWidth="50" MaxWidth="100" CanUserSort="False"/>-->
                <DataGridTextColumn Header="账号" Binding="{Binding user_name}" Width="*" MinWidth="50" MaxWidth="200" CanUserSort="False"/>
                <DataGridTextColumn Header="真实姓名" Binding="{Binding true_name}" Width="*" MinWidth="50" MaxWidth="200" CanUserSort="False"/>
                <DataGridTextColumn Header="用户类型" Binding="{Binding user_power}"  Width="*" MinWidth="50" MaxWidth="200" CanUserSort="False"/>
                <DataGridTextColumn Header="创建时间" Binding="{Binding create_time}" Width="*" MinWidth="50" MaxWidth="200" CanUserSort="False"/>
            </DataGrid.Columns>

        </DataGrid>


    </DockPanel>
</Window>
